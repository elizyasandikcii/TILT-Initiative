<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TILT - The Initiative for Life and Thoughts</title>

    <!-- Chart.js for stock charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Favicon -->
    <link rel="icon" href="https://cdn.glitch.global/5f72f9b5-5a11-4f80-b63f-8b4fc4574362/logoka%C5%9Fe%20(2).png?v=1745342288049" type="image/png" />

    <!-- CSS dosyanı buraya bağla -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header id="main-header">
                    <div class="logo">
            <img src="https://cdn.glitch.global/5f72f9b5-5a11-4f80-b63f-8b4fc4574362/logoka%C5%9Fe%20(2).png?v=1745342288049" alt="TILT Logo" class="logo-image">
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="projects.html">Projects</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="contact-us.html">Contact Us</a></li>
                <li><a href="get-involved.html">Get Involved</a></li>
            </ul>
        </nav>
        <div class="header-controls">
            <div class="language-selector">
                <button class="language-btn">EN</button>
                <div class="language-menu">
                    <a href="index.html">🇬🇧English</a>
                    <a href="tr-index.html">🇹🇷Türkçe</a>
                </div>
            </div>
            <div class="theme-switch">
                <input type="checkbox" id="theme-toggle" class="theme-toggle">
                <div class="theme-icon sun">
                    <div class="sun-icon"></div>
                </div>
                <div class="theme-icon moon">
                    <div class="moon-icon"></div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="content-columns">
            <div class="content-column">
                <section class="upcoming-episodes">
                    <h2>TILT - The Initiative for Life and Thoughts</h2>
                    <p>Exploring the intersection of philosophy, science, and everyday life to foster deeper understanding and meaningful change.</p>
                    
   <div class="placeholder-image">
  <svg width="100%" height="100%" viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
    <defs>
      <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stop-color="#003366" />
        <stop offset="100%" stop-color="#000033" />
      </linearGradient>
      <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
        <feGaussianBlur stdDeviation="5" result="blur" />
        <feComposite in="SourceGraphic" in2="blur" operator="over" />
      </filter>
    </defs>
    
    <!-- Background -->
    <rect width="100%" height="100%" fill="url(#grad1)" />
    
    <!-- Central node -->
    <circle cx="150" cy="100" r="15" fill="#ffffff" filter="url(#glow)">
      <animate attributeName="r" values="15;20;15" dur="4s" repeatCount="indefinite" />
    </circle>
    
    <!-- Connecting nodes -->
    <circle cx="80" cy="60" r="8" fill="#ff9900">
      <animate attributeName="cx" values="80;85;80" dur="5s" repeatCount="indefinite" />
      <animate attributeName="cy" values="60;65;60" dur="6s" repeatCount="indefinite" />
    </circle>
    
    <circle cx="220" cy="60" r="8" fill="#00ffcc">
      <animate attributeName="cx" values="220;215;220" dur="4s" repeatCount="indefinite" />
      <animate attributeName="cy" values="60;55;60" dur="5s" repeatCount="indefinite" />
    </circle>
    
    <circle cx="80" cy="140" r="8" fill="#ff3366">
      <animate attributeName="cx" values="80;75;80" dur="6s" repeatCount="indefinite" />
      <animate attributeName="cy" values="140;135;140" dur="4s" repeatCount="indefinite" />
    </circle>
    
    <circle cx="220" cy="140" r="8" fill="#66ff33">
      <animate attributeName="cx" values="220;225;220" dur="5s" repeatCount="indefinite" />
      <animate attributeName="cy" values="140;145;140" dur="6s" repeatCount="indefinite" />
    </circle>
    
    <!-- Additional smaller nodes -->
    <circle cx="110" cy="40" r="5" fill="#ffcc00">
      <animate attributeName="opacity" values="0.5;1;0.5" dur="3s" repeatCount="indefinite" />
    </circle>
    
    <circle cx="190" cy="40" r="5" fill="#00ccff">
      <animate attributeName="opacity" values="0.5;1;0.5" dur="4s" repeatCount="indefinite" />
    </circle>
    
    <circle cx="110" cy="160" r="5" fill="#ff0066">
      <animate attributeName="opacity" values="0.5;1;0.5" dur="5s" repeatCount="indefinite" />
    </circle>
    
    <circle cx="190" cy="160" r="5" fill="#00ff99">
      <animate attributeName="opacity" values="0.5;1;0.5" dur="3.5s" repeatCount="indefinite" />
    </circle>
    
    <!-- Connection lines -->
    <line x1="150" y1="100" x2="80" y2="60" stroke="#ffffff" stroke-width="1.5" stroke-opacity="0.6" />
    <line x1="150" y1="100" x2="220" y2="60" stroke="#ffffff" stroke-width="1.5" stroke-opacity="0.6" />
    <line x1="150" y1="100" x2="80" y2="140" stroke="#ffffff" stroke-width="1.5" stroke-opacity="0.6" />
    <line x1="150" y1="100" x2="220" y2="140" stroke="#ffffff" stroke-width="1.5" stroke-opacity="0.6" />
    <line x1="80" y1="60" x2="220" y2="60" stroke="#ffffff" stroke-width="1" stroke-opacity="0.4" />
    <line x1="80" y1="140" x2="220" y2="140" stroke="#ffffff" stroke-width="1" stroke-opacity="0.4" />
    <line x1="80" y1="60" x2="80" y2="140" stroke="#ffffff" stroke-width="1" stroke-opacity="0.4" />
    <line x1="220" y1="60" x2="220" y2="140" stroke="#ffffff" stroke-width="1" stroke-opacity="0.4" />
    
    <!-- Pulse effect from center -->
    <circle cx="150" cy="100" r="5" fill="none" stroke="#ffffff" stroke-width="2" stroke-opacity="0.3">
      <animate attributeName="r" values="5;50;5" dur="8s" repeatCount="indefinite" />
      <animate attributeName="stroke-opacity" values="0.3;0;0.3" dur="8s" repeatCount="indefinite" />
    </circle>
  </svg>
</div>
                    <p>The Initiative for Life and Thoughts (TILT) is dedicated to creating spaces for reflection, dialogue, and action on the most pressing questions of our time. We bring together thinkers, creators, and activists to challenge assumptions and explore new possibilities.</p>
                    <a href="about.html" class="learn-more">Learn more...</a>
                </section>
            </div>
            
            <div class="content-column">
                <section class="newsflash">
                    <h2>QUOTE OF THE DAY:</h2>
                    <blockquote>
                        "The unexamined life is not worth living." - Socrates
                    </blockquote>
                    <h2>LATEST BLOG</h2>
                    <h3>TILT's Future</h3>
                    <p>TILT's second anniversery is on it's way, and we have really exciting plans for this year! We have a whole lot of new projects and i'm proud to intruduce you to some of these projects

...</p>
                    <a href="blog.html" class="learn-more">Read more...</a>
                    
                    <div class="update-info">
                       By: Elizya 
                        31 August 2025
                    </div>
                </section>
            </div>
        </div>
        
        <!-- News Section -->
        <section class="news-section">
            <div class="news-header">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"></path>
                        <path d="M18 14h-8"></path>
                        <path d="M15 18h-5"></path>
                        <path d="M10 6h8v4h-8V6Z"></path>
                    </svg>
                    Latest News from New York Times
                </h2>
                <button class="refresh-btn" id="refresh-news">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12a9 9 0 0 1-9 9m9-9a9 9 0 0 0-9-9m9 9H3m9 9a9 9 0 0 1-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 0 1 9-9"></path>
                    </svg>
                    Refresh
                </button>
            </div>
            <div class="news-grid" id="news-container">
                <div class="loading">Loading news...</div>
            </div>
        </section>
        
        <!-- Calendar Section -->
        <section class="calendar-container">
            <div class="calendar-header">
                <h2 id="calendar-month-year">Month Year</h2>
                <div class="calendar-nav">
                    <button id="prev-month">&lt; Prev</button>
                    <button id="today">Today</button>
                    <button id="next-month">Next &gt;</button>
                </div>
            </div>
            <table class="calendar">
                <thead>
                    <tr>
                        <th>Sun</th>
                        <th>Mon</th>
                        <th>Tue</th>
                        <th>Wed</th>
                        <th>Thu</th>
                        <th>Fri</th>
                        <th>Sat</th>
                    </tr>
                </thead>
                <tbody id="calendar-body">
                    <!-- Calendar will be generated by JavaScript -->
                </tbody>
            </table>
        </section>
        
        <!-- Stock Market Section -->
        <section class="stocks-section">
            <div class="stocks-header">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 3v16a2 2 0 0 0 2 2h16"></path>
                        <path d="M7 14l4-4 4 4 6-6"></path>
                        <path d="M18 8h3v3"></path>
                    </svg>
                    Stock Market Data
                </h2>
                <div class="stock-controls">
                    <select id="stock-select" class="stock-select">
                        <option value="AAPL">Apple (AAPL)</option>
                        <option value="MSFT">Microsoft (MSFT)</option>
                        <option value="GOOGL">Google (GOOGL)</option>
                        <option value="AMZN">Amazon (AMZN)</option>
                        <option value="TSLA">Tesla (TSLA)</option>
                        <option value="SPY">S&P 500 (SPY)</option>
                    </select>
                    <select id="timeframe-select" class="timeframe-select">
                        <option value="TIME_SERIES_DAILY">Daily</option>
                        <option value="TIME_SERIES_WEEKLY">Weekly</option>
                        <option value="TIME_SERIES_MONTHLY">Monthly</option>
                    </select>
                    <button class="refresh-btn" id="refresh-stocks">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 12a9 9 0 0 1-9 9m9-9a9 9 0 0 0-9-9m9 9H3m9 9a9 9 0 0 1-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 0 1 9-9"></path>
                        </svg>
                        Refresh
                    </button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="stock-chart"></canvas>
            </div>
            <div class="stock-info" id="stock-info">
                <div class="stock-price" id="stock-price">Loading...</div>
                <div class="stock-change" id="stock-change">
                    <span id="change-amount">--</span>
                    <span id="change-percent">(--)</span>
                </div>
            </div>
        </section>
        
        <!-- Currency Exchange Section -->
        <section class="currency-section">
            <div class="currency-header">
                <h2>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="8"></circle>
                        <line x1="12" y1="8" x2="12" y2="16"></line>
                        <line x1="8" y1="12" x2="16" y2="12"></line>
                    </svg>
                    Currency Exchange Rates
                </h2>
                <button class="refresh-btn" id="refresh-currency">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12a9 9 0 0 1-9 9m9-9a9 9 0 0 0-9-9m9 9H3m9 9a9 9 0 0 1-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 0 1 9-9"></path>
                    </svg>
                    Refresh
                </button>
            </div>
            <div class="currency-grid" id="currency-container">
                <div class="loading">Loading currency data...</div>
            </div>
        </section>
       
        <!-- Map and Clocks Section -->
        <section class="map-clocks-section">
            <div class="map-container" id="satellite-map"></div>
            
            <div class="clocks-container">
                <div class="clock-card">
                    <div class="clock-flag">🇺🇸</div>
                    <div class="clock-city">New York</div>
                    <div class="clock-time" id="time-ny">--:--:--</div>
                    <div class="clock-date" id="date-ny">--</div>
                </div>
                
                <div class="clock-card">
                    <div class="clock-flag">🇹🇷</div>
                    <div class="clock-city">Istanbul</div>
                    <div class="clock-time" id="time-istanbul">--:--:--</div>
                    <div class="clock-date" id="date-istanbul">--</div>
                </div>
                
                <div class="clock-card">
                    <div class="clock-flag">🇬🇧</div>
                    <div class="clock-city">London</div>
                    <div class="clock-time" id="time-london">--:--:--</div>
                    <div class="clock-date" id="date-london">--</div>
                </div>
                
                <div class="clock-card">
                    <div class="clock-flag">🇯🇵</div>
                    <div class="clock-city">Tokyo</div>
                    <div class="clock-time" id="time-tokyo">--:--:--</div>
                    <div class="clock-date" id="date-tokyo">--</div>
                </div>
            </div>
        </section>
        <section class="doodle-den-section">
    <div class="section-header">
        <h2>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
            Doodle Den
        </h2>
        <p>Unleash your creativity with our drawing tools</p>
    </div>
    
    <div class="doodle-container">
        <canvas id="doodle-canvas" width="800" height="500"></canvas>
        
        <div class="doodle-controls">
            <div class="tools-row">
                <div class="tool-group">
                    <h3>Pens & Tools</h3>
                    <div class="tool-buttons">
                        <button class="tool-btn active" data-tool="ballpoint" title="Ballpoint Pen">
                            <span class="tool-icon">•</span> Ballpoint
                        </button>
                        <button class="tool-btn" data-tool="pencil" title="Pencil">
                            <span class="tool-icon">✏️</span> Pencil
                        </button>
                        <button class="tool-btn" data-tool="marker" title="Marker">
                            <span class="tool-icon">🖊️</span> Marker
                        </button>
                        <button class="tool-btn" data-tool="brush" title="Paint Brush">
                            <span class="tool-icon">🖌️</span> Brush
                        </button>
                        <button class="tool-btn" data-tool="highlighter" title="Highlighter">
                            <span class="tool-icon">🖍️</span> Highlighter
                        </button>
                        <button class="tool-btn" data-tool="calligraphy" title="Calligraphy Pen">
                            <span class="tool-icon">✒️</span> Calligraphy
                        </button>
                        <button class="tool-btn" data-tool="eraser" title="Eraser">
                            <span class="tool-icon">🧽</span> Eraser
                        </button>
                        <button class="tool-btn" data-tool="spray" title="Spray Can">
                            <span class="tool-icon">💨</span> Spray
                        </button>
                    </div>
                </div>
                
                <div class="tool-group">
                    <h3>Line Width</h3>
                    <input type="range" id="brush-size" min="1" max="50" value="5">
                    <span id="brush-size-value">5px</span>
                </div>
            </div>
            
            <div class="tools-row">
                <div class="tool-group color-palette">
                    <h3>Colors</h3>
                    <div class="colors-grid">
                        <div class="color-option" data-color="#000000" style="background-color: #000000;"></div>
                        <div class="color-option" data-color="#ff0000" style="background-color: #ff0000;"></div>
                        <div class="color-option" data-color="#ff9900" style="background-color: #ff9900;"></div>
                        <div class="color-option" data-color="#ffff00" style="background-color: #ffff00;"></div>
                        <div class="color-option" data-color="#00ff00" style="background-color: #00ff00;"></div>
                        <div class="color-option" data-color="#00ffff" style="background-color: #00ffff;"></div>
                        <div class="color-option" data-color="#0000ff" style="background-color: #0000ff;"></div>
                        <div class="color-option" data-color="#9900ff" style="background-color: #9900ff;"></div>
                        <div class="color-option" data-color="#ff00ff" style="background-color: #ff00ff;"></div>
                        <div class="color-option" data-color="#ffffff" style="background-color: #ffffff; border: 1px solid #ccc;"></div>
                        <div class="color-option" data-color="#aaaaaa" style="background-color: #aaaaaa;"></div>
                        <div class="color-option" data-color="#555555" style="background-color: #555555;"></div>
                    </div>
                    <div class="custom-color">
                        <label for="custom-color-picker">Custom:</label>
                        <input type="color" id="custom-color-picker" value="#ff0000">
                    </div>
                </div>
            </div>
            
            <div class="tools-row">
                <div class="tool-group actions">
                    <button id="clear-canvas" class="action-btn">🧹 Clear Canvas</button>
                    <button id="save-doodle" class="action-btn">💾 Save Drawing</button>
                    <button id="toggle-fullscreen" class="action-btn">📺 Fullscreen</button>
                </div>
            </div>
        </div>
    </div>
</section>
    </main>

 <footer>
    <div class="social-links">
        <a href="https://www.instagram.com/tilt_initiative?igsh=MW5qOWdndmpldmlheg==" target="_blank" class="social-link">
            <svg class="social-icon" viewBox="0 0 24 24" fill="var(--instagram-color)">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
            </svg>
        </a>
        <a href="https://www.tiktok.com/@tilt_intiative" target="_blank" class="social-link">
            <svg class="social-icon" viewBox="0 0 24 24" fill="var(--tiktok-color)">
                <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
            </svg>
        </a>
        <a href="https://linkedin.com" target="_blank" class="social-link">
            <svg class="social-icon" viewBox="0 0 24 24" fill="var(--linkedin-color)">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
        </a>
        <a href="https://x.com" target="_blank" class="social-link">
            <svg class="social-icon" viewBox="0 0 24 24" fill="var(--x-color)">
                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
            </svg>
        </a>
          <a href="mailto:info@tiltinitiatives.org">info@tiltinitiatives.org</a>
    </div>
    <p>© 2025 TILT – The Initiative for Life and Thoughts</p>
    <p>Designed with 8.6 billion neurons and a dream</p>
</footer>

    <script>
        // Dark/Light mode toggle
        const themeToggle = document.getElementById('theme-toggle');
        themeToggle.addEventListener('change', () => {
            document.body.classList.toggle('dark-mode');
            
            // Save preference to localStorage
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
        });

        // Check for saved theme preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
            themeToggle.checked = true;
        }
        // Initial trigger for animations
        window.dispatchEvent(new Event('scroll'));

        // Shrink header on scroll
        const header = document.getElementById('main-header');
        let lastScroll = 0;
        
        window.addEventListener('scroll', () => {
            const currentScroll = window.pageYOffset;
            
            if (currentScroll > lastScroll && currentScroll > 100) {
                // Scroll down
                header.classList.add('shrink');
            } else if (currentScroll < lastScroll || currentScroll <= 100) {
                // Scroll up or at top
                header.classList.remove('shrink');
            }
            
            lastScroll = currentScroll;
        });

        // Calendar functionality
        let currentDate = new Date();
        let currentMonth = currentDate.getMonth();
        let currentYear = currentDate.getFullYear();

        const months = ["January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"];

        // Event data structure
        const events = [
            {
                id: 1,
                title: "TILT Annual Conference 2025",
                date: new Date(2025, 8, 8), // September 8th, 2025 (months are 0-indexed)
                description: "Join us for our annual conference exploring the future of human thought and technological advancement. Keynote speakers and workshops included.",
                color: "#dc3545"
            },
            {
                id: 2,
                title: "Philosophy Discussion Group",
                date: new Date(currentYear, currentMonth, 15),
                description: "Monthly meeting to discuss philosophical texts and ideas",
                color: "#28a745"
            },
            {
                id: 3,
                title: "Science & Society Workshop",
                date: new Date(currentYear, currentMonth, 22),
                description: "How scientific advancements are shaping our future society",
                color: "#007bff"
            }
        ];

        function generateCalendar(month, year) {
            const calendarBody = document.getElementById("calendar-body");
            const monthYearElement = document.getElementById("calendar-month-year");
            
            // Clear previous calendar
            calendarBody.innerHTML = "";
            
            // Set month and year header
            monthYearElement.textContent = `${months[month]} ${year}`;
            
            // Get first day of month and number of days in month
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Create date object for today to compare
            const today = new Date();
            const isCurrentMonth = month === today.getMonth() && year === today.getFullYear();
            
            // Create calendar
            let date = 1;
            for (let i = 0; i < 6; i++) {
                // Create a table row
                const row = document.createElement("tr");
                
                // Create individual cells for each day
                for (let j = 0; j < 7; j++) {
                    if (i === 0 && j < firstDay) {
                        // Empty cells before the first day of the month
                        const cell = document.createElement("td");
                        const cellText = document.createTextNode("");
                        cell.appendChild(cellText);
                        row.appendChild(cell);
                    } else if (date > daysInMonth) {
                        // Empty cells after the last day of the month
                        const cell = document.createElement("td");
                        const cellText = document.createTextNode("");
                        cell.appendChild(cellText);
                        row.appendChild(cell);
                    } else {
                        // Cells with dates
                        const cell = document.createElement("td");
                        
                        // Check if this is the current day
                        if (isCurrentMonth && date === today.getDate()) {
                            const dayDiv = document.createElement("div");
                            dayDiv.className = "current-day";
                            dayDiv.textContent = date;
                            cell.appendChild(dayDiv);
                        } else {
                            const cellText = document.createTextNode(date);
                            cell.appendChild(cellText);
                        }
                        
                        // Check if this date is from a different month (for next/prev month days)
                        if ((i === 0 && j < firstDay) || date > daysInMonth) {
                            cell.classList.add("other-month");
                        }
                        
                        // Check if this date has any events
                        const hasEvent = events.some(event => {
                            const eventDate = event.date;
                            return eventDate.getDate() === date && 
                                   eventDate.getMonth() === month && 
                                   eventDate.getFullYear() === year;
                        });
                        
                        if (hasEvent) {
                            cell.classList.add("event-day");
                            const indicator = document.createElement("div");
                            indicator.className = "event-indicator";
                            indicator.title = "Click to view events";
                            cell.appendChild(indicator);
                            
                            // Add click event to show events
                            cell.addEventListener('click', () => {
                                showEventsForDate(date, month, year);
                            });
                        }
                        
                        row.appendChild(cell);
                        date++;
                    }
                }
                
                // Append the row to the calendar body
                calendarBody.appendChild(row);
                
                // Stop making rows if we've run out of days
                if (date > daysInMonth) {
                    break;
                }
            }
        }

        // Function to show events for a specific date
        function showEventsForDate(day, month, year) {
            const selectedDate = new Date(year, month, day);
            
            // Find events for this date
            const eventsForDate = events.filter(event => {
                const eventDate = event.date;
                return eventDate.getDate() === day && 
                       eventDate.getMonth() === month && 
                       eventDate.getFullYear() === year;
            });
            
            if (eventsForDate.length > 0) {
                showEventModal(eventsForDate, selectedDate);
            }
        }

        // Function to show event modal
        function showEventModal(events, date) {
            // Create or show modal
            let modal = document.getElementById('event-modal');
            let overlay = document.getElementById('modal-overlay');
            
            if (!modal) {
                // Create modal
                modal = document.createElement('div');
                modal.id = 'event-modal';
                modal.className = 'event-modal';
                
                // Create overlay
                overlay = document.createElement('div');
                overlay.id = 'modal-overlay';
                overlay.className = 'overlay';
                overlay.addEventListener('click', closeEventModal);
                
                document.body.appendChild(modal);
                document.body.appendChild(overlay);
            }
            
            // Build modal content
            let modalContent = `
                <button class="close-btn">&times;</button>
                <h3>Events on ${date.toDateString()}</h3>
            `;
            
            events.forEach(event => {
                modalContent += `
                    <div class="event-item" style="border-left: 4px solid ${event.color}; padding-left: 10px; margin-bottom: 15px;">
                        <h4 style="margin-top: 0; color: ${event.color};">${event.title}</h4>
                        <p class="event-description">${event.description}</p>
                    </div>
                `;
            });
            
            modal.innerHTML = modalContent;
            
            // Add close event to button
            modal.querySelector('.close-btn').addEventListener('click', closeEventModal);
            
            // Show modal and overlay
            modal.style.display = 'block';
            overlay.style.display = 'block';
        }

        // Function to close event modal
        function closeEventModal() {
            const modal = document.getElementById('event-modal');
            const overlay = document.getElementById('modal-overlay');
            
            if (modal) modal.style.display = 'none';
            if (overlay) overlay.style.display = 'none';
        }

        // Navigation functions
        document.getElementById("prev-month").addEventListener("click", () => {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar(currentMonth, currentYear);
        });

        document.getElementById("next-month").addEventListener("click", () => {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar(currentMonth, currentYear);
        });

        document.getElementById("today").addEventListener("click", () => {
            currentDate = new Date();
            currentMonth = currentDate.getMonth();
            currentYear = currentDate.getFullYear();
            generateCalendar(currentMonth, currentYear);
        });

        // Initialize calendar
        generateCalendar(currentMonth, currentYear);

        // NYT News API Integration
        const newsContainer = document.getElementById('news-container');
        const refreshButton = document.getElementById('refresh-news');
        
        // NYT API Key
        const API_KEY = '6NNf0KIZZZElhq4ZSOTfYqInqbB84dRN';
        
        // Function to fetch news from NYT
        async function fetchNews() {
            try {
                newsContainer.innerHTML = '<div class="loading">Loading news...</div>';
                
                // Fetch news from NYT API
                const response = await fetch(`https://api.nytimes.com/svc/topstories/v2/home.json?api-key=${API_KEY}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.results && data.results.length > 0) {
                    displayNews(data.results);
                } else {
                    throw new Error('No news articles found in response');
                }
                
            } catch (error) {
                console.error('Error fetching news:', error);
                
                // Fallback to mock data if API fails
                const mockNews = [
                    {
                        title: 'Climate Change Agreement Reached at International Summit',
                        abstract: 'World leaders have agreed on a new set of measures to combat climate change, aiming for carbon neutrality by 2050.',
                        url: 'https://www.nytimes.com/',
                        byline: 'By JANE DOE',
                        published_date: '2023-09-15',
                        multimedia: [
                            {
                                url: 'https://via.placeholder.com/300x160?text=Climate+News',
                                format: 'Standard Thumbnail'
                            }
                        ]
                    },
                    {
                        title: 'New Breakthrough in Quantum Computing',
                        abstract: 'Scientists announce a major advancement in quantum computing that could revolutionize technology industries.',
                        url: 'https://www.nytimes.com/',
                        byline: 'By JOHN SMITH',
                        published_date: '2023-09-14',
                        multimedia: [
                            {
                                url: 'https://via.placeholder.com/300x160?text=Quantum+Computing',
                                format: 'Standard Thumbnail'
                            }
                        ]
                    },
                    {
                        title: 'Global Economic Forum Addresses Rising Inflation',
                        abstract: 'Economists and policymakers gather to discuss strategies for managing inflation and supporting economic growth.',
                        url: 'https://www.nytimes.com/',
                        byline: 'By ALICE JOHNSON',
                        published_date: '2023-09-13',
                        multimedia: [
                            {
                                url: 'https://via.placeholder.com/300x160?text=Economy',
                                format: 'Standard Thumbnail'
                            }
                        ]
                    },
                    {
                        title: 'Space Exploration Reaches New Milestone',
                        abstract: 'The latest space mission has successfully reached its destination, marking a new era in interstellar exploration.',
                        url: 'https://www.nytimes.com/',
                        byline: 'By ROBERT WILLIAMS',
                        published_date: '2023-09-12',
                        multimedia: [
                            {
                                url: 'https://via.placeholder.com/300x160?text=Space',
                                format: 'Standard Thumbnail'
                            }
                        ]
                    }
                ];
                
                displayNews(mockNews);
                
                // Show error message but still display mock data
                newsContainer.innerHTML = `
                    <div class="error">
                        <p>NYT API connection failed. Showing sample news.</p>
                        <p><small>${error.message}</small></p>
                    </div>
                ` + newsContainer.innerHTML;
            }
        }
        
        // Function to display news articles
        function displayNews(articles) {
            if (!articles || articles.length === 0) {
                newsContainer.innerHTML = '<div class="error">No news articles found.</div>';
                return;
            }
            
            // Limit to 4 articles for better layout
            const articlesToShow = articles.slice(0, 6);
            
            newsContainer.innerHTML = articlesToShow.map(article => {
                // Find a suitable image
                let imageUrl = 'https://via.placeholder.com/300x160?text=News';
                if (article.multimedia && article.multimedia.length > 0) {
                    // Try to find a large image first
                    const largeImage = article.multimedia.find(media => media.format === 'superJumbo');
                    const normalImage = article.multimedia.find(media => media.format === 'Normal');
                    const thumbImage = article.multimedia.find(media => media.format === 'Standard Thumbnail');
                    
                    if (largeImage) imageUrl = largeImage.url;
                    else if (normalImage) imageUrl = normalImage.url;
                    else if (thumbImage) imageUrl = thumbImage.url;
                    else imageUrl = article.multimedia[0].url;
                }
                
                return `
                    <div class="news-card">
                        <img src="${imageUrl}" alt="${article.title}" class="news-image">
                        <div class="news-content">
                            <h3 class="news-title">
                                <a href="${article.url}" target="_blank" rel="noopener">${article.title}</a>
                            </h3>
                            <p class="news-description">${article.abstract}</p>
                            <div class="news-meta">
                                <span>${article.byline || 'By New York Times'}</span>
                                <span>${new Date(article.published_date).toLocaleDateString()}</span>
                            </div>
                            </div>
                    </div>
                `;
            }).join('');
        }
        
        // Event listener for refresh button
        refreshButton.addEventListener('click', fetchNews);
        
        // Fetch news on page load
        fetchNews();
        
        // Stock Market Data Section
    const stockSelect = document.getElementById('stock-select');
    const timeframeSelect = document.getElementById('timeframe-select');
    const refreshStocksButton = document.getElementById('refresh-stocks');
    const stockChartCanvas = document.getElementById('stock-chart');
    const stockPriceElement = document.getElementById('stock-price');
    const changeAmountElement = document.getElementById('change-amount');
    const changePercentElement = document.getElementById('change-percent');
    const stockInfoElement = document.getElementById('stock-info');
    
    let stockChart = null;
    const ALPHA_VANTAGE_API_KEY = 'd11672c0-1325-4987-be09-22caa6f2eee6';
    
    // Function to fetch stock data
    async function fetchStockData(symbol = 'AAPL', timeframe = 'TIME_SERIES_DAILY') {
        try {
            stockInfoElement.innerHTML = '<div class="loading">Loading stock data...</div>';
            
            // Use Alpha Vantage API
            const response = await fetch(`https://www.alphavantage.co/query?function=${timeframe}&symbol=${symbol}&apikey=${ALPHA_VANTAGE_API_KEY}`);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            
            // Check which timeframe data we have
            let timeSeriesData;
            if (data['Time Series (Daily)']) {
                timeSeriesData = data['Time Series (Daily)'];
            } else if (data['Weekly Time Series']) {
                timeSeriesData = data['Weekly Time Series'];
            } else if (data['Monthly Time Series']) {
                timeSeriesData = data['Monthly Time Series'];
            } else {
                throw new Error('No time series data found in response');
            }
            
            // Process the data
            const dates = Object.keys(timeSeriesData).sort();
            const values = dates.map(date => {
                return {
                    date: date,
                    price: parseFloat(timeSeriesData[date]['4. close'])
                };
            });
            
            // Get current and previous prices
            const currentPrice = values[values.length - 1].price;
            const previousPrice = values[values.length - 2].price;
            
            displayStockData({
                symbol: symbol,
                values: values,
                currentPrice: currentPrice,
                previousPrice: previousPrice
            });
            
        } catch (error) {
            console.error('Error fetching stock data:', error);
            
            // Fallback to mock data if API fails
            const mockData = generateMockStockData(symbol, timeframe);
            displayStockData(mockData);
            
            // Show error message but still display data
            stockInfoElement.innerHTML = `
                <div class="error">
                    <p>Alpha Vantage API connection issue. Showing sample data.</p>
                    <p><small>${error.message}</small></p>
                </div>
            ` + stockInfoElement.innerHTML;
        }
    }
    
    // Function to generate mock stock data (fallback)
    function generateMockStockData(symbol, timeframe) {
        const data = { 
            symbol: symbol,
            values: [],
            currentPrice: 0,
            previousPrice: 0
        };
        
        // Set base price based on symbol
        const basePrices = {
            'AAPL': 170, 'MSFT': 330, 'GOOGL': 135, 
            'AMZN': 140, 'TSLA': 240, 'SPY': 450
        };
        
        const basePrice = basePrices[symbol] || 100;
        const volatility = basePrice * 0.02; // 2% volatility
        
        // Generate data points
        const points = timeframe === 'TIME_SERIES_MONTHLY' ? 30 : 
                      timeframe === 'TIME_SERIES_WEEKLY' ? 60 : 90;
        
        let currentValue = basePrice;
        const values = [];
        
        for (let i = points; i >= 0; i--) {
            // Random walk for stock price
            const change = (Math.random() - 0.5) * volatility;
            currentValue += change;
            
            // Ensure price doesn't go negative
            currentValue = Math.max(5, currentValue);
            
            // Format date
            const date = new Date();
            date.setDate(date.getDate() - i);
            
            values.push({
                date: date.toISOString().split('T')[0],
                price: parseFloat(currentValue.toFixed(2))
            });
        }
        
        data.values = values;
        data.currentPrice = values[values.length - 1].price;
        data.previousPrice = values[values.length - 2].price;
        
        return data;
    }
    
    // Function to display stock data in chart
    function displayStockData(stockData) {
        const dates = stockData.values.map(item => {
            const date = new Date(item.date);
            return date.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric' 
            });
        });
        
        const prices = stockData.values.map(item => item.price);
        
        // Calculate price change
        const change = stockData.currentPrice - stockData.previousPrice;
        const changePercent = (change / stockData.previousPrice) * 100;
        
        // Update price display
        stockPriceElement.textContent = `$${stockData.currentPrice.toFixed(2)}`;
        changeAmountElement.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(2)}`;
        changePercentElement.textContent = `(${change >= 0 ? '+' : ''}${changePercent.toFixed(2)}%)`;
        
        // Set color based on change
        if (change > 0) {
            changeAmountElement.className = 'positive';
            changePercentElement.className = 'positive';
            stockPriceElement.className = 'stock-price positive';
        } else if (change < 0) {
            changeAmountElement.className = 'negative';
            changePercentElement.className = 'negative';
            stockPriceElement.className = 'stock-price negative';
        } else {
            changeAmountElement.className = '';
            changePercentElement.className = '';
            stockPriceElement.className = 'stock-price';
        }
        
        // Create or update chart
        const ctx = stockChartCanvas.getContext('2d');
        
        if (stockChart) {
            stockChart.destroy();
        }
        
        stockChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: dates,
                datasets: [{
                    label: `${stockData.symbol} Price`,
                    data: prices,
                    borderColor: change >= 0 ? '#28a745' : '#dc3545',
                    backgroundColor: change >= 0 ? 'rgba(40, 167, 69, 0.1)' : 'rgba(220, 53, 69, 0.1)',
                    fill: true,
                    tension: 0.1,
                    pointRadius: 0,
                    pointHoverRadius: 5
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            label: function(context) {
                                return `$${context.raw.toFixed(2)}`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        ticks: {
                            callback: function(value) {
                                return '$' + value;
                            }
                        }
                    }
                }
            }
        });
    }
    
    // Event listeners for stock controls
    stockSelect.addEventListener('change', () => {
        fetchStockData(stockSelect.value, timeframeSelect.value);
    });
    
    timeframeSelect.addEventListener('change', () => {
        fetchStockData(stockSelect.value, timeframeSelect.value);
    });
    
    refreshStocksButton.addEventListener('click', () => {
        fetchStockData(stockSelect.value, timeframeSelect.value);
    });
    
    // Initialize stock data
    fetchStockData();
          
      // Currency Exchange Rates Section
    const currencyContainer = document.getElementById('currency-container');
    const refreshCurrencyButton = document.getElementById('refresh-currency');
    const EXCHANGE_RATE_API_KEY = '5cae913d674df6bdbd3b6951';
    
    // Store previous rates to calculate changes
    let previousRates = {};
    
    // Function to fetch currency data
    async function fetchCurrencyData() {
        try {
            currencyContainer.innerHTML = '<div class="loading">Loading currency data...</div>';
            
            // Fetch data from ExchangeRate-API
            const response = await fetch(`https://v6.exchangerate-api.com/v6/${EXCHANGE_RATE_API_KEY}/latest/USD`);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            
            if (data && data.conversion_rates) {
                const rates = data.conversion_rates;
                const currentTime = new Date().toISOString();
                
                // Calculate changes if we have previous data
                let changes = {};
                if (Object.keys(previousRates).length > 0) {
                    changes = calculateChanges(previousRates, rates);
                }
                
                // Store current rates for next comparison
                previousRates = {...rates};
                
                // Prepare currency data
                const currencyData = [
                    {
                        pair: "USD/EUR",
                        rate: rates.EUR || 0,
                        change: changes.EUR || 0,
                        changePercent: changes.EUR ? (changes.EUR / (rates.EUR - changes.EUR)) * 100 : 0,
                        lastUpdated: currentTime
                    },
                    {
                        pair: "USD/TRY",
                        rate: rates.TRY || 0,
                        change: changes.TRY || 0,
                        changePercent: changes.TRY ? (changes.TRY / (rates.TRY - changes.TRY)) * 100 : 0,
                        lastUpdated: currentTime
                    },
                    {
                        pair: "EUR/TRY",
                        rate: rates.TRY && rates.EUR ? rates.TRY / rates.EUR : 0,
                        change: changes.EUR_TRY || 0,
                        changePercent: changes.EUR_TRY ? (changes.EUR_TRY / ((rates.TRY / rates.EUR) - changes.EUR_TRY)) * 100 : 0,
                        lastUpdated: currentTime
                    },
                    {
                        pair: "USD/GBP",
                        rate: rates.GBP || 0,
                        change: changes.GBP || 0,
                        changePercent: changes.GBP ? (changes.GBP / (rates.GBP - changes.GBP)) * 100 : 0,
                        lastUpdated: currentTime
                    }
                ];
                
                displayCurrencyData(currencyData);
            } else {
                throw new Error('No currency data found in response');
            }
            
        } catch (error) {
            console.error('Error fetching currency data:', error);
            
            // Fallback to mock data if API fails
            const mockCurrencyData = [
                {
                    pair: "USD/EUR",
                    rate: 0.93,
                    change: 0.002,
                    changePercent: 0.22,
                    lastUpdated: new Date().toISOString()
                },
                {
                    pair: "USD/TRY",
                    rate: 32.15,
                    change: -0.25,
                    changePercent: -0.77,
                    lastUpdated: new Date().toISOString()
                },
                {
                    pair: "EUR/TRY",
                    rate: 34.58,
                    change: 0.12,
                    changePercent: 0.35,
                    lastUpdated: new Date().toISOString()
                },
                {
                    pair: "USD/GBP",
                    rate: 0.79,
                    change: 0.005,
                    changePercent: 0.64,
                    lastUpdated: new Date().toISOString()
                }
            ];
            
            displayCurrencyData(mockCurrencyData);
            
            // Show error message but still display data
            currencyContainer.innerHTML = `
                <div class="error">
                    <p>Currency API connection issue. Showing sample data.</p>
                    <p><small>${error.message}</small></p>
                </div>
            ` + currencyContainer.innerHTML;
        }
    }
    
    // Function to calculate changes between previous and current rates
    function calculateChanges(prevRates, currentRates) {
        const changes = {};
        
        // Calculate direct rate changes
        if (prevRates.EUR && currentRates.EUR) {
            changes.EUR = currentRates.EUR - prevRates.EUR;
        }
        if (prevRates.TRY && currentRates.TRY) {
            changes.TRY = currentRates.TRY - prevRates.TRY;
        }
        if (prevRates.GBP && currentRates.GBP) {
            changes.GBP = currentRates.GBP - prevRates.GBP;
        }
        
        // Calculate cross rate changes (EUR/TRY)
        if (prevRates.EUR && prevRates.TRY && currentRates.EUR && currentRates.TRY) {
            const prevEurTry = prevRates.TRY / prevRates.EUR;
            const currentEurTry = currentRates.TRY / currentRates.EUR;
            changes.EUR_TRY = currentEurTry - prevEurTry;
        }
        
        return changes;
    }
    
    // Function to display currency data
    function displayCurrencyData(currencies) {
        if (!currencies || currencies.length === 0) {
            currencyContainer.innerHTML = '<div class="error">No currency data found.</div>';
            return;
        }
        
        currencyContainer.innerHTML = currencies.map(currency => {
            const isPositive = currency.change >= 0;
            const changeIcon = isPositive ? '↗' : '↘';
            
            return `
                <div class="currency-card">
                    <div class="currency-pair">
                        <span>${currency.pair}</span>
                        <span class="currency-flag">${getFlagEmoji(currency.pair)}</span>
                    </div>
                    <div class="currency-rate">${currency.rate.toFixed(4)}</div>
                    <div class="currency-change ${isPositive ? 'positive' : 'negative'}">
                        <span>${changeIcon} ${isPositive ? '+' : ''}${currency.change.toFixed(4)}</span>
                        <span>(${isPositive ? '+' : ''}${currency.changePercent.toFixed(2)}%)</span>
                    </div>
                    <div class="currency-info">
                        <span>Last updated:</span>
                        <span>${new Date(currency.lastUpdated).toLocaleTimeString()}</span>
                    </div>
                </div>
            `;
        }).join('');
    }
    
    // Helper function to get flag emojis for currency pairs
    function getFlagEmoji(pair) {
        const flagMap = {
            'USD': '🇺🇸',
            'EUR': '🇪🇺',
            'TRY': '🇹🇷',
            'GBP': '🇬🇧'
        };
        
        const [from, to] = pair.split('/');
        return `${flagMap[from] || '💵'} → ${flagMap[to] || '💵'}`;
    }
    
    // Event listener for refresh button
    refreshCurrencyButton.addEventListener('click', fetchCurrencyData);
    
    // Fetch currency data on page load
    fetchCurrencyData();
    
    // Refresh currency data every 5 minutes
    setInterval(fetchCurrencyData, 5 * 60 * 1000);
        
        // Initialize satellite map with better tile source
        function initMap() {
            // Create map centered on the world
            const map = L.map('satellite-map').setView([20, 0], 2);
            
            // Add better satellite tile layer
            const satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community',
                maxZoom: 18
            });
            
            // Add a fallback standard map layer
            const standardLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 18
            });
            
            // Add layer control
            const baseMaps = {
                "Satellite": satelliteLayer,
                "Standard": standardLayer
            };
            
            // Add the satellite layer by default
            satelliteLayer.addTo(map);
            L.control.layers(baseMaps).addTo(map);
            
            // Add some markers for the cities we're showing clocks for
            const cities = [
                {name: "New York", coords: [40.7128, -74.0060]},
                {name: "Istanbul", coords: [41.0082, 28.9784]},
                {name: "London", coords: [51.5074, -0.1278]},
                {name: "Tokyo", coords: [35.6762, 139.6503]}
            ];
            
            cities.forEach(city => {
                L.marker(city.coords)
                    .addTo(map)
                    .bindPopup(city.name);
            });
        }

        // Update world clocks
        function updateClocks() {
            const timeOptions = { 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit',
                hour12: false 
            };
            
            const dateOptions = { 
                weekday: 'short', 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            };
            
            // New York (EST/EDT)
            const nyTime = new Date().toLocaleString('en-US', { 
                timeZone: 'America/New_York',
                ...timeOptions
            });
            const nyDate = new Date().toLocaleString('en-US', { 
                timeZone: 'America/New_York',
                ...dateOptions
            });
            document.getElementById('time-ny').textContent = nyTime;
            document.getElementById('date-ny').textContent = nyDate;
            
            // Istanbul
            const istanbulTime = new Date().toLocaleString('en-US', { 
                timeZone: 'Europe/Istanbul',
                ...timeOptions
            });
            const istanbulDate = new Date().toLocaleString('en-US', { 
                timeZone: 'Europe/Istanbul',
                ...dateOptions
            });
            document.getElementById('time-istanbul').textContent = istanbulTime;
            document.getElementById('date-istanbul').textContent = istanbulDate;
            
            // London
            const londonTime = new Date().toLocaleString('en-US', { 
                timeZone: 'Europe/London',
                ...timeOptions
            });
            const londonDate = new Date().toLocaleString('en-US', { 
                timeZone: 'Europe/London',
                ...dateOptions
            });
            document.getElementById('time-london').textContent = londonTime;
            document.getElementById('date-london').textContent = londonDate;
            
            // Tokyo
            const tokyoTime = new Date().toLocaleString('en-US', { 
                timeZone: 'Asia/Tokyo',
                ...timeOptions
            });
            const tokyoDate = new Date().toLocaleString('en-US', { 
                timeZone: 'Asia/Tokyo',
                ...dateOptions
            });
            document.getElementById('time-tokyo').textContent = tokyoTime;
            document.getElementById('date-tokyo').textContent = tokyoDate;
        }

        // Initialize map and clocks when page loads
        document.addEventListener('DOMContentLoaded', () => {
            initMap();
            updateClocks();
            
            // Update clocks every second
            setInterval(updateClocks, 1000);
        });
        
        // Quote of the Day Feature
function getQuoteOfTheDay() {
    const quotes = [
        "The unexamined life is not worth living. - Socrates",
        "Life is what happens when you're busy making other plans. - John Lennon",
        "The purpose of our lives is to be happy. - Dalai Lama",
        "Get busy living or get busy dying. - Stephen King",
        "You only live once, but if you do it right, once is enough. - Mae West",
        "The greatest glory in living lies not in never falling, but in rising every time we fall. - Nelson Mandela",
        "Your time is limited, so don't waste it living someone else's life. - Steve Jobs",
        "Life is either a daring adventure or nothing at all. - Helen Keller",
        "The way to get started is to quit talking and begin doing. - Walt Disney",
        "If life were predictable it would cease to be life, and be without flavor. - Eleanor Roosevelt",
        "If you look at what you have in life, you'll always have more. - Oprah Winfrey",
        "Life is a long lesson in humility. - James M. Barrie",
        "In the end, it's not the years in your life that count. It's the life in your years. - Abraham Lincoln",
        "Love the life you live. Live the life you love. - Bob Marley",
        "Life is really simple, but we insist on making it complicated. - Confucius",
        "The future belongs to those who believe in the beauty of their dreams. - Eleanor Roosevelt",
        "The best way to predict your future is to create it. - Abraham Lincoln",
        "The only impossible journey is the one you never begin. - Tony Robbins",
        "It is during our darkest moments that we must focus to see the light. - Aristotle",
        "Whoever is happy will make others happy too. - Anne Frank"
    ];
    
    // Get today's date as a unique seed for the day
    const today = new Date();
    const seed = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
    
    // Simple deterministic random based on the date
    const index = seed % quotes.length;
    
    return quotes[index];
}

// Function to update the quote in the blog section
function updateQuoteOfTheDay() {
    const quoteElement = document.querySelector('.newsflash blockquote');
    if (quoteElement) {
        quoteElement.textContent = getQuoteOfTheDay();
    }
}

// Update the quote when the page loads
document.addEventListener('DOMContentLoaded', updateQuoteOfTheDay);
          document.addEventListener('DOMContentLoaded', function() {
        // Canvas setup
        const canvas = document.getElementById('doodle-canvas');
        const ctx = canvas.getContext('2d');
        
        // Set canvas size appropriately
        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth - 40; // Account for padding
            canvas.height = Math.min(500, window.innerHeight * 0.6);
            redrawCanvas();
        }
        
        // Initialize canvas with white background
        function initCanvas() {
            ctx.fillStyle = document.body.classList.contains('dark-mode') ? '#1a1a1a' : '#ffffff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
        
        // Redraw canvas content (for resizing)
        function redrawCanvas() {
            // This would need to be implemented if you want to preserve drawings on resize
            // For now, we'll just reinitialize
            initCanvas();
        }
        
        // Drawing state
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        let currentTool = 'ballpoint';
        let currentColor = '#000000';
        let brushSize = 5;
        let globalAlpha = 1;
        
        // Initialize
        initCanvas();
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        // Tool buttons
        const toolButtons = document.querySelectorAll('.tool-btn');
        toolButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                toolButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentTool = btn.dataset.tool;
                
                // Set tool-specific properties
                switch(currentTool) {
                    case 'ballpoint':
                        brushSize = 5;
                        globalAlpha = 1;
                        ctx.lineCap = 'round';
                        ctx.lineJoin = 'round';
                        break;
                    case 'pencil':
                        brushSize = 3;
                        globalAlpha = 0.7;
                        ctx.lineCap = 'round';
                        ctx.lineJoin = 'round';
                        break;
                    case 'marker':
                        brushSize = 10;
                        globalAlpha = 0.8;
                        ctx.lineCap = 'square';
                        ctx.lineJoin = 'bevel';
                        break;
                    case 'brush':
                        brushSize = 15;
                        globalAlpha = 0.9;
                        ctx.lineCap = 'round';
                        ctx.lineJoin = 'round';
                        break;
                    case 'highlighter':
                        brushSize = 20;
                        globalAlpha = 0.3;
                        ctx.lineCap = 'square';
                        ctx.lineJoin = 'bevel';
                        break;
                    case 'calligraphy':
                        brushSize = 8;
                        globalAlpha = 1;
                        ctx.lineCap = 'square';
                        ctx.lineJoin = 'miter';
                        break;
                    case 'eraser':
                        brushSize = document.getElementById('brush-size').value;
                        globalAlpha = 1;
                        ctx.lineCap = 'round';
                        ctx.lineJoin = 'round';
                        break;
                    case 'spray':
                        brushSize = 15;
                        globalAlpha = 0.5;
                        ctx.lineCap = 'round';
                        ctx.lineJoin = 'round';
                        break;
                }
                
                document.getElementById('brush-size').value = brushSize;
                document.getElementById('brush-size-value').textContent = `${brushSize}px`;
            });
        });
        
        // Brush size control
        const brushSizeSlider = document.getElementById('brush-size');
        const brushSizeValue = document.getElementById('brush-size-value');
        
        brushSizeSlider.addEventListener('input', () => {
            brushSize = parseInt(brushSizeSlider.value);
            brushSizeValue.textContent = `${brushSize}px`;
        });
        
        // Color selection
        const colorOptions = document.querySelectorAll('.color-option');
        const customColorPicker = document.getElementById('custom-color-picker');
        
        colorOptions.forEach(option => {
            option.addEventListener('click', () => {
                colorOptions.forEach(o => o.classList.remove('selected'));
                option.classList.add('selected');
                currentColor = option.dataset.color;
            });
        });
        
        customColorPicker.addEventListener('input', () => {
            currentColor = customColorPicker.value;
            colorOptions.forEach(o => o.classList.remove('selected'));
        });
        
        // Drawing functions
        function startDrawing(e) {
            isDrawing = true;
            [lastX, lastY] = getPosition(e);
            
            if (currentTool === 'spray') {
                sprayPaint(lastX, lastY);
            }
        }
        
        function draw(e) {
            if (!isDrawing) return;
            
            const [x, y] = getPosition(e);
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(x, y);
            
            if (currentTool === 'eraser') {
                ctx.strokeStyle = document.body.classList.contains('dark-mode') ? '#1a1a1a' : '#ffffff';
            } else {
                ctx.strokeStyle = currentColor;
            }
            
            ctx.lineWidth = brushSize;
            ctx.globalAlpha = globalAlpha;
            ctx.stroke();
            
            // Special tools
            if (currentTool === 'spray') {
                sprayPaint(x, y);
            }
            
            [lastX, lastY] = [x, y];
        }
        
        function stopDrawing() {
            isDrawing = false;
        }
        
        function sprayPaint(x, y) {
            ctx.fillStyle = currentColor;
            ctx.globalAlpha = globalAlpha;
            
            const density = brushSize * 2;
            for (let i = 0; i < density; i++) {
                const offsetX = (Math.random() - 0.5) * brushSize * 2;
                const offsetY = (Math.random() - 0.5) * brushSize * 2;
                
                if (Math.sqrt(offsetX * offsetX + offsetY * offsetY) <= brushSize) {
                    ctx.beginPath();
                    ctx.arc(x + offsetX, y + offsetY, Math.random() * 2 + 1, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
        }
        
        function getPosition(e) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            
            let clientX, clientY;
            
            if (e.type.includes('touch')) {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }
            
            return [
                (clientX - rect.left) * scaleX,
                (clientY - rect.top) * scaleY
            ];
        }
        
        // Event listeners for drawing
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);
        
        // Touch support
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            startDrawing(e);
        });
        
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            draw(e);
        });
        
        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            stopDrawing();
        });
        
        // Clear canvas
        document.getElementById('clear-canvas').addEventListener('click', () => {
            if (confirm('Are you sure you want to clear the canvas?')) {
                initCanvas();
            }
        });
        
        // Save drawing
        document.getElementById('save-doodle').addEventListener('click', () => {
            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');
            
            tempCanvas.width = canvas.width;
            tempCanvas.height = canvas.height;
            
            // Fill with white background for saving
            tempCtx.fillStyle = '#ffffff';
            tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
            tempCtx.drawImage(canvas, 0, 0);
            
            const dataURL = tempCanvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = 'tilt-doodle.png';
            link.href = dataURL;
            link.click();
        });
        
        // Fullscreen toggle
        document.getElementById('toggle-fullscreen').addEventListener('click', () => {
            if (!document.fullscreenElement) {
                canvas.requestFullscreen().catch(err => {
                    alert(`Error attempting to enable fullscreen: ${err.message}`);
                });
            } else {
                document.exitFullscreen();
            }
        });
        
        // Handle dark mode changes
        const observer = new MutationObserver(() => {
            // If we're in eraser mode, we might need to adjust the eraser color
            if (currentTool === 'eraser') {
                // Just redraw the canvas to update the background
                initCanvas();
            }
        });
        
        observer.observe(document.body, { 
            attributes: true, 
            attributeFilter: ['class'] 
        });
    });
        
    </script>
</body>
</html>
